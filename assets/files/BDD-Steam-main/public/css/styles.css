/* ==============================================================
   Design tokens
   ============================================================== */
:root {
  /* Primitive colors */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB for opacity */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Semantic (Light) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Motion */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Steam-like tokens */
  --steam-primary: var(--color-primary);
  --steam-primary-hover: var(--color-primary-hover);
  --steam-text-light: var(--color-text);
  --steam-text-dark: var(--color-text-secondary);
  --steam-success: var(--color-success);
  --steam-warning: var(--color-warning);
  --steam-error: var(--color-error);
  --steam-card-bg: var(--color-surface);
  --steam-card-hover: var(--color-secondary);
  --steam-gradient: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-active) 100%);
  --steam-shadow: var(--shadow-lg);
  --steam-border-radius: var(--radius-base);
  --transition-smooth: all var(--duration-normal) var(--ease-standard);
}

/* Dark (media) */
@media (prefers-color-scheme: dark) {
  :root {
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);

    --steam-card-bg: var(--color-surface);
    --steam-card-hover: var(--color-secondary-hover);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
  }
}

/* Explicit data attributes (keep overrides API-compatible) */
[data-color-scheme="dark"] {
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --steam-card-bg: var(--color-surface);
  --steam-card-hover: var(--color-secondary-hover);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
}
[data-color-scheme="light"] {
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --steam-card-bg: var(--color-surface);
  --steam-card-hover: var(--color-secondary-hover);
}

/* ==============================================================
   Base
   ============================================================== */
* { box-sizing: border-box; }
* { scrollbar-width: thin; scrollbar-color: var(--steam-primary) transparent; }
*::-webkit-scrollbar { height: 8px; width: 8px; }
*::-webkit-scrollbar-thumb { background: rgba(var(--color-teal-500-rgb), 0.35); border-radius: 8px; }
*::-webkit-scrollbar-track { background: transparent; }

body {
  background: var(--color-background);
  color: var(--steam-text-light);
  font-family: var(--font-family-base);
  margin: 0;
  min-height: 100vh;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}
.app-container {
  min-height: 100vh;
  background: linear-gradient(135deg, var(--color-background) 0%, var(--color-surface) 100%);
}

/* ==============================================================
   Header & navigation
   ============================================================== */
.header {
  background: rgba(255, 255, 255, 0.02);
  backdrop-filter: blur(10px);
  border-bottom: 2px solid var(--color-primary);
  position: sticky; top: 0; z-index: 1000;
  box-shadow: var(--steam-shadow);
}
.header-content {
  display: flex; justify-content: space-between; align-items: center;
  padding: var(--space-16) var(--space-24);
  max-width: 1400px; margin: 0 auto;
}
.header-left { display: flex; align-items: center; gap: var(--space-32); }
.logo h1 {
  color: var(--steam-primary);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  margin: 0;
  text-shadow: 0 0 20px rgba(var(--color-teal-500-rgb), 0.3);
  letter-spacing: var(--letter-spacing-tight);
  line-height: var(--line-height-tight);
}
.main-nav { display: flex; gap: var(--space-8); }
.nav-btn {
  background: transparent;
  border: 2px solid transparent;
  color: var(--steam-text-light);
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  cursor: pointer; transition: var(--transition-smooth);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-base);
  position: relative; overflow: hidden;
}
.nav-btn:hover { background: var(--color-secondary); border-color: var(--steam-primary); }
.nav-btn:focus-visible { outline: none; box-shadow: var(--focus-ring); }
.nav-btn.active {
  background: var(--steam-primary);
  color: var(--color-btn-primary-text);
  font-weight: var(--font-weight-bold);
}
.header-right { display: flex; align-items: center; gap: var(--space-16); }

/* Search */
.search-container { position: relative; display: flex; align-items: center; }
.search-container input {
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  color: var(--steam-text-light);
  padding: var(--space-8) var(--space-12);
  border-radius: var(--radius-base);
  transition: width var(--duration-normal) var(--ease-standard),
              box-shadow var(--duration-normal) var(--ease-standard),
              border-color var(--duration-normal) var(--ease-standard);
  width: clamp(260px, 32vw, 360px);
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}
.search-container input:focus {
  outline: none; border-color: var(--steam-primary); box-shadow: var(--focus-ring);
  width: clamp(300px, 40vw, 480px);
}
.search-container input::placeholder { color: var(--steam-text-dark); }
.search-icon { position: absolute; right: var(--space-12); color: var(--steam-text-dark); }

/* Platforms */
.platform-filters { display: flex; gap: var(--space-8); }
.platform-btn {
  background: var(--color-secondary);
  border: 2px solid transparent;
  padding: var(--space-8);
  border-radius: var(--radius-base);
  cursor: pointer; transition: var(--transition-smooth);
  font-size: var(--font-size-lg);
  position: relative; overflow: hidden;
}
.platform-btn:hover { background: var(--color-secondary-hover); }
.platform-btn:focus-visible { outline: none; box-shadow: var(--focus-ring); }
.platform-btn.active { border-color: var(--steam-primary); background: rgba(var(--color-teal-500-rgb), 0.1); }

/* Profile switcher (header) */
.header .profile-switcher {
  display: inline-flex; align-items: center; gap: 8px; margin-left: 12px; white-space: nowrap;
}
.header .profile-switcher label { font-size: 12px; opacity: .8; }
.header .profile-switcher .form-control { min-width: 140px; }

/* ==============================================================
   Secondary filters bar
   ============================================================== */
.secondary-bar {
  background: var(--color-secondary);
  backdrop-filter: blur(5px);
  border-bottom: 1px solid var(--color-border);
  padding: var(--space-16) 0;
}
.secondary-content {
  max-width: 1400px; margin: 0 auto;
  padding: 0 var(--space-24);
  display: flex; flex-wrap: wrap;
  gap: 12px 16px; align-items: flex-end;
}
.filter-group {
  display: flex; flex-direction: column; gap: var(--space-4);
  min-width: 180px; flex: 1 1 180px;
}
.filter-group label {
  font-size: var(--font-size-sm); color: var(--steam-text-dark);
  font-weight: var(--font-weight-medium); white-space: nowrap;
}
.form-control {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--steam-text-light);
  padding: var(--space-8) var(--space-12);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  transition: var(--transition-smooth);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
}
.form-control:focus { outline: none; border-color: var(--steam-primary); box-shadow: 0 0 0 2px var(--color-focus-ring); }

/* Price range (2 sliders side-by-side) */
.price-range {
  display: grid; grid-template-columns: 1fr 1fr;
  column-gap: 12px; align-items: center;
}
.range-slider {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 4px; border-radius: 2px;
  background: rgba(var(--color-teal-500-rgb), 0.3);
  outline: none;
}
.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none; appearance: none; width: 16px; height: 16px;
  border-radius: 50%; background: var(--steam-primary); cursor: pointer;
  box-shadow: 0 0 0 2px rgba(var(--color-teal-500-rgb), 0.3);
}
.range-slider::-moz-range-thumb {
  width: 16px; height: 16px; border-radius: 50%;
  background: var(--steam-primary); cursor: pointer; border: none;
  box-shadow: 0 0 0 2px rgba(var(--color-teal-500-rgb), 0.3);
}

/* Keep "Add GOTY" group compact */
.goty-filter { flex: 0 0 auto; min-width: auto; }
.goty-filter .btn { white-space: nowrap; }

/* Responsive tweaks for filters */
@media (max-width: 1280px) {
  .filter-group { flex-basis: 220px; min-width: 200px; }
}
@media (max-width: 820px) {
  .filter-group { flex: 1 1 100%; min-width: 100%; }
  .price-range { grid-template-columns: 1fr; row-gap: 8px; }
}

/* ==============================================================
   Main content, grid & cards
   ============================================================== */
.main-content { max-width: 1400px; margin: 0 auto; padding: var(--space-32) var(--space-24); }
.content-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: var(--space-32); perspective: 900px;
}
.content-header h2 {
  color: var(--steam-text-light);
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold); margin: 0;
  letter-spacing: var(--letter-spacing-tight); line-height: var(--line-height-tight);
}
.content-actions { display: flex; align-items: center; gap: var(--space-16); }
#results-count { color: var(--steam-text-dark); font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); }

/* Buttons */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: var(--space-8);
  padding: var(--space-8) var(--space-16); border: none; border-radius: var(--radius-base);
  font-weight: var(--font-weight-medium); cursor: pointer; transition: var(--transition-smooth);
  text-decoration: none; font-size: var(--font-size-sm); font-family: var(--font-family-base);
  line-height: var(--line-height-normal); position: relative; overflow: hidden;
}
.btn:focus-visible { outline: none; box-shadow: var(--focus-ring); }
.btn--primary { background: var(--steam-primary); color: var(--color-btn-primary-text); }
.btn--primary:hover { background: var(--steam-primary-hover); transform: translateY(-1px); box-shadow: var(--shadow-md); }
.btn--primary:active { background: var(--color-primary-active); }
.btn--primary::after {
  content: ""; position: absolute; inset: 0;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.25) 50%, transparent 100%);
  transform: translateX(-120%); transition: transform 700ms var(--ease-standard);
  mix-blend-mode: soft-light; pointer-events: none;
}
.btn--primary:hover::after { transform: translateX(120%); }
.btn--secondary { background: var(--color-secondary); color: var(--steam-text-light); border: 1px solid var(--color-border); }
.btn--secondary:hover { background: var(--color-secondary-hover); border-color: var(--steam-primary); }
.btn--secondary:active { background: var(--color-secondary-active); }

/* Grid */
.games-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-24); margin-top: var(--space-24);
}

/* Card */
.game-card {
  position: relative;
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  background: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0) 40%), var(--steam-card-bg);
  box-shadow: var(--shadow-sm);
  overflow: hidden; transform: translateZ(0);
  transition: transform 200ms var(--ease-standard), box-shadow 220ms var(--ease-standard), border-color 220ms var(--ease-standard), background 220ms var(--ease-standard);
}
.game-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 24px rgba(0,0,0,.18), 0 2px 10px rgba(0,0,0,.08);
  border-color: rgba(var(--color-teal-500-rgb), .35);
  background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0) 45%), var(--steam-card-hover);
}
.game-card .thumb { position: relative; isolation: isolate; }
.game-card .thumb::after {
  content: ""; position: absolute; inset: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,.10) 0%, rgba(0,0,0,0) 45%, rgba(0,0,0,.25) 100%);
  z-index: 1; pointer-events: none; transition: opacity var(--duration-normal) var(--ease-standard); opacity: .8;
}
.game-card:hover .thumb::after { opacity: .95; }
.game-card::before {
  content: ""; position: absolute; top: -30%; left: -40%; width: 60%; height: 160%;
  transform: rotate(25deg);
  background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.10) 45%, rgba(255,255,255,0) 100%);
  opacity: 0; pointer-events: none;
}
.game-card:hover::before { animation: sheen 1s var(--ease-standard); }
@keyframes sheen { from { transform: translateX(0) rotate(25deg); opacity: 0; } 20% { opacity: .9; } to { transform: translateX(280%) rotate(25deg); opacity: 0; } }

/* Image in card */
.game-card .thumb img { width: 100%; height: 140px; object-fit: cover; will-change: transform; transition: transform 420ms var(--ease-standard), filter 320ms var(--ease-standard); }
.game-card:hover .thumb img { transform: scale(1.06); }

/* Favorite button */
.fav-btn, .favorite-btn {
  position: absolute; top: .5rem; right: .5rem;
  font-size: var(--font-size-sm); padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: 999px;
  background: rgba(0,0,0,.45); color: var(--steam-text-light);
  cursor: pointer; transition: var(--transition-smooth);
  z-index: 2; backdrop-filter: blur(2px);
  box-shadow: 0 4px 10px rgba(0,0,0,.25);
}
.fav-btn:hover, .favorite-btn:hover { transform: translateY(-1px) scale(1.03); }
.fav-btn.active, .favorite-btn.active {
  background: linear-gradient(135deg, #ffd86b, #ffc107);
  color: #1f1f1f; border-color: rgba(255,199,0,.9);
  box-shadow: 0 6px 14px rgba(255,199,0,.35);
}

/* Card content */
.game-card .meta { padding: 12px 14px 14px; display: grid; gap: 6px; }
.game-card .title { margin: 0; font-size: var(--font-size-lg); line-height: var(--line-height-tight); letter-spacing: var(--letter-spacing-tight); }
.game-card .sub { font-size: var(--font-size-sm); color: var(--steam-text-dark); }

/* Badges row */
.badges { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 2px; }
.badge {
  padding: 2px 8px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,.06); background: rgba(255,255,255,.04);
  font-size: var(--font-size-xs); backdrop-filter: blur(2px);
  transition: transform 160ms var(--ease-standard), background 160ms var(--ease-standard);
}
.badge:hover { transform: translateY(-1px); background: rgba(255,255,255,.07); }

/* Price/date row */
.game-card .row { display: flex; align-items: center; justify-content: space-between; padding-top: 4px; font-size: var(--font-size-sm); }
.game-card .price { font-weight: var(--font-weight-bold); color: var(--steam-primary); }
.game-card .price.free { color: var(--steam-success); opacity: .95; }
.game-card .date { color: var(--steam-text-dark); }

/* Fine info */
.game-card .fine { display: grid; gap: 4px; margin-top: 4px; }
.game-card .fine > div, .game-card .fine > a { font-size: var(--font-size-sm); color: var(--steam-text-dark); text-decoration: none; }
.game-card .fine > a:hover { text-decoration: underline; }

/* Shots */
.game-card .shots { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 6px; margin-top: 8px; }
.game-card .shots img {
  width: 100%; height: 80px; object-fit: cover; border-radius: 8px;
  outline: 1px solid rgba(255,255,255,.06);
  filter: saturate(0.95) contrast(1.02);
  transition: transform 260ms var(--ease-standard), filter 260ms var(--ease-standard), outline-color 260ms var(--ease-standard);
}
.game-card .shots img:hover { transform: translateY(-2px) scale(1.02); filter: saturate(1.15) contrast(1.05); outline-color: rgba(var(--color-teal-500-rgb), .35); }

/* Details */
.game-card details { margin-top: 6px; }
.game-card details summary {
  padding: 8px 10px; list-style: none; cursor: pointer; user-select: none;
  border: 1px solid var(--color-card-border-inner); border-radius: 8px;
  background: rgba(255,255,255,.03); color: var(--steam-text-light);
  transition: background 160ms var(--ease-standard), border-color 160ms var(--ease-standard);
}
.game-card details summary::-webkit-details-marker { display: none; }
.game-card details summary::after { content: "â–¾"; float: right; transition: transform 200ms var(--ease-standard); opacity: .8; }
.game-card details[open] summary::after { transform: rotate(-180deg); }
.game-card details > *:not(summary) { animation: detailsFade 240ms var(--ease-standard) both; }
@keyframes detailsFade { from { opacity: 0; transform: translateY(-4px); } to { opacity: 1; transform: translateY(0); } }
.game-card details[open] summary { background: rgba(255,255,255,.06); border-color: rgba(var(--color-teal-500-rgb), .35); }

/* ==============================================================
   GOTY badge (single source of truth)
   ============================================================== */
.game-card .thumb { position: relative; } /* ensure positioning context */

.goty-badge {
  position: absolute; top: 8px; left: 8px;
  display: inline-flex; align-items: center; gap: 8px;
  padding: 6px 10px; border-radius: 9999px;
  background: linear-gradient(135deg, #ffe082, #ffc107);
  color: #1b1b1b; font-weight: 700; font-size: 13px;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
  z-index: 3;
}
.goty-remove {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; margin-left: 2px; border: none;
  border-radius: 9999px; background: #e53935; color: #fff;
  font-size: 18px; line-height: 1; cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,.4), inset 0 0 0 1px rgba(255,255,255,.15);
  transition: transform .12s ease, background-color .12s ease, box-shadow .12s ease;
}
.goty-remove:hover { transform: scale(1.08); background: #c62828; box-shadow: 0 3px 12px rgba(0,0,0,.5); }
.goty-remove:focus-visible { outline: 2px solid #fff; outline-offset: 2px; }

.game-card.is-goty { border-color: rgba(255,215,0,.6); box-shadow: 0 6px 20px rgba(255,215,0,.15), var(--shadow-sm); }
.game-card.is-goty:hover { box-shadow: 0 10px 28px rgba(255,215,0,.22), var(--shadow-lg); }

/* HiDPI subtle shadow */
@media (min-resolution: 2dppx) {
  .goty-remove { filter: drop-shadow(0 1px 2px rgba(0,0,0,.25)); }
}

/* ==============================================================
   GOTY list (standalone section)
   ============================================================== */
.goty-list {
  margin-top: var(--space-32);
  background: var(--color-secondary);
  border-radius: var(--radius-lg);
  padding: var(--space-24);
  border: 2px solid var(--color-border);
  box-shadow: var(--shadow-sm);
}
.goty-list h3 {
  color: var(--steam-primary); font-size: var(--font-size-2xl);
  margin-bottom: var(--space-24); text-align: center; font-weight: var(--font-weight-bold);
  letter-spacing: var(--letter-spacing-tight);
}
.goty-entries { display: flex; flex-direction: column; gap: var(--space-16); }
.goty-entry {
  display: flex; align-items: center; justify-content: space-between;
  background: var(--color-surface); padding: var(--space-16);
  border-radius: var(--radius-base); border: 1px solid var(--color-border);
  transition: var(--transition-smooth); box-shadow: var(--shadow-xs);
}
.goty-entry:hover { background: var(--steam-card-hover); border-color: var(--steam-primary); box-shadow: var(--shadow-sm); }
.goty-entry-content { display: flex; align-items: center; gap: var(--space-16); }
.goty-entry-image { width: 60px; height: 30px; object-fit: cover; border-radius: var(--radius-sm); }
.goty-entry-info { flex: 1; }
.goty-entry-title { color: var(--steam-text-light); font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); margin: 0 0 var(--space-4) 0; line-height: var(--line-height-tight); }
.goty-entry-year { color: var(--color-warning); font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); margin: 0 0 var(--space-4) 0; }
.goty-entry-dev { color: var(--steam-text-dark); font-size: var(--font-size-sm); margin: 0; }
.goty-entry-remove {
  background: rgba(var(--color-red-500-rgb), 0.2);
  border: 1px solid var(--steam-error); color: var(--steam-error);
  padding: var(--space-8); border-radius: var(--radius-sm); cursor: pointer;
  transition: var(--transition-smooth);
}
.goty-entry-remove:hover { background: rgba(var(--color-red-500-rgb), 0.4); transform: scale(1.1); }

/* ==============================================================
   Modal
   ============================================================== */
.modal {
  position: fixed; inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex; align-items: center; justify-content: center;
  z-index: 2000; backdrop-filter: blur(5px);
}
.modal.hidden { display: none; }
.modal-content {
  background: var(--steam-card-bg); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg);
  max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto; border: 2px solid var(--steam-primary);
  animation: pop 240ms var(--ease-standard);
}
@keyframes pop { from { transform: translateY(8px) scale(0.96); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
.modal-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: var(--space-24) var(--space-24) 0; border-bottom: 1px solid var(--color-border); margin-bottom: var(--space-24);
}
.modal-header h3 { color: var(--steam-text-light); font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); margin: 0; letter-spacing: var(--letter-spacing-tight); }
.modal-close {
  background: none; border: none; color: var(--steam-text-dark);
  font-size: var(--font-size-2xl); cursor: pointer; padding: var(--space-4); border-radius: var(--radius-sm); transition: var(--transition-smooth);
}
.modal-close:hover { color: var(--steam-error); background: rgba(var(--color-red-500-rgb), 0.1); }
.modal-close:focus-visible { outline: none; box-shadow: var(--focus-ring); }
.modal-body { padding: 0 var(--space-24); }
.form-group { margin-bottom: var(--space-16); }
.form-group label { display: block; color: var(--steam-text-light); font-weight: var(--font-weight-medium); margin-bottom: var(--space-8); font-size: var(--font-size-sm); }
.modal-footer { display: flex; justify-content: flex-end; gap: var(--space-12); padding: var(--space-24); border-top: 1px solid var(--color-border); margin-top: var(--space-24); }

/* ==============================================================
   Loaders & empty state
   ============================================================== */
.loading { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--space-32); text-align: center; }
.spinner {
  width: 40px; height: 40px;
  border: 4px solid rgba(var(--color-teal-500-rgb), 0.2);
  border-left-color: var(--steam-primary);
  border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: var(--space-16);
}
@keyframes spin { to { transform: rotate(360deg); } }
.no-results { text-align: center; padding: var(--space-32); color: var(--steam-text-dark); }
.no-results-icon { font-size: 4rem; margin-bottom: var(--space-16); color: var(--steam-text-dark); }
.no-results h3 { color: var(--steam-text-light); margin-bottom: var(--space-8); font-size: var(--font-size-xl); font-weight: var(--font-weight-semibold); }

/* ==============================================================
   Toaster
   ============================================================== */
.toaster {
  position: fixed; top: 16px; right: 16px;
  display: flex; flex-direction: column; gap: 10px; z-index: 3000;
}
.toaster .toast-item {
  background: var(--steam-card-bg); border: 1px solid var(--color-border); color: var(--steam-text-light);
  padding: 10px 14px; border-radius: var(--radius-base); box-shadow: var(--shadow-lg);
  transform: translateY(-10px); opacity: 0;
  transition: transform var(--duration-normal) var(--ease-standard), opacity var(--duration-normal) var(--ease-standard);
}
.toaster .toast-item.show { transform: translateY(0); opacity: 1; }

/* ==============================================================
   Pager
   ============================================================== */
.pager {
  margin-top: 14px; padding: 10px 12px;
  border: 1px solid var(--color-card-border); border-radius: var(--radius-base);
  background: rgba(255,255,255,.03);
  display: flex; align-items: center; justify-content: center;

  position: sticky; bottom: 0; z-index: 40;
  backdrop-filter: blur(6px);
  background: color-mix(in oklab, var(--steam-card-bg) 86%, transparent);
  border-top: 1px solid var(--color-card-border);
  box-shadow: 0 -6px 18px rgba(0,0,0,.12);
}
.pager__row { width: 100%; display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; }
.pager__info { color: var(--steam-text-dark); font-size: var(--font-size-sm); }
.pager__controls { display: flex; align-items: center; gap: 8px; }
.pager__btn[disabled] { opacity: .5; cursor: not-allowed; }
.pager__page { color: var(--steam-text-dark); font-size: var(--font-size-sm); }
.pager__limit { width: 100px; }
.infinite-sentinel { height: 1px; width: 100%; }

/* ==============================================================
   Misc animations & accessibility
   ============================================================== */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
  .game-card, .game-card * { transition: none !important; animation: none !important; }
}
.platform-btn.active { animation: pulse 420ms var(--ease-standard); }
@keyframes pulse { 0% { transform: scale(1); } 40% { transform: scale(1.06); } 100% { transform: scale(1); } }
#content-title.flip { animation: flipIn 480ms var(--ease-standard); transform-origin: bottom; }
@keyframes flipIn { from { transform: rotateX(-80deg); opacity: 0.6; } to { transform: rotateX(0deg); opacity: 1; } }
.games-grid.fade { animation: gridFade 220ms var(--ease-standard); }
@keyframes gridFade { from { opacity: 0.6; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

/* ==============================================================
   Responsive layout
   ============================================================== */
@media (max-width: 768px) {
  .header-content { flex-direction: column; gap: var(--space-16); }
  .header-left { flex-direction: column; gap: var(--space-16); }
  .main-nav { flex-wrap: wrap; }
  .search-container input { width: 250px; }
  .secondary-content { flex-direction: column; align-items: stretch; }
  .filter-group { width: 100%; }
  .games-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: var(--space-16); }
  .content-header { flex-direction: column; gap: var(--space-16); text-align: center; }
}
@media (max-width: 480px) {
  .header-content { padding: var(--space-12) var(--space-16); }
  .main-content { padding: var(--space-24) var(--space-16); }
  .secondary-content { padding: 0 var(--space-16); }
  .header-left { align-items: center; text-align: center; }
  .main-nav { justify-content: center; }
  .nav-btn { font-size: var(--font-size-sm); padding: var(--space-6) var(--space-12); }
  .search-container input { width: 200px; font-size: var(--font-size-sm); }
  .games-grid { grid-template-columns: 1fr; gap: var(--space-12); }
  .game-card { max-width: 100%; }
  .modal-content { width: 95%; margin: var(--space-16); }
  .modal-header, .modal-body, .modal-footer { padding-left: var(--space-16); padding-right: var(--space-16); }
  .content-header h2 { font-size: var(--font-size-2xl); }
  .logo h1 { font-size: var(--font-size-xl); }
  .goty-list { padding: var(--space-16); margin-left: var(--space-16); margin-right: var(--space-16); }
  .goty-entry { flex-direction: column; align-items: flex-start; gap: var(--space-12); }
  .goty-entry-content { width: 100%; }
}

/* ==============================================================
   GOTY typeahead
   ============================================================== */
.typeahead-wrap { position: relative; }
#goty-typeahead { width: 100%; }
.typeahead-list {
  position: absolute; top: calc(100% + 6px); left: 0; right: 0;
  max-height: 260px; overflow: auto;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  box-shadow: var(--shadow-lg); z-index: 3001;
  pointer-events: none; opacity: 0; transform: translateY(-4px);
  transition: opacity var(--duration-normal) var(--ease-standard), transform var(--duration-normal) var(--ease-standard);
}
.typeahead-list.open { pointer-events: auto; opacity: 1; transform: translateY(0); }
.typeahead-list .item {
  display: flex; align-items: center; gap: 8px;
  padding: 8px 10px; cursor: pointer; font-size: var(--font-size-sm);
  border-bottom: 1px solid var(--color-card-border);
}
.typeahead-list .item:last-child { border-bottom: 0; }
.typeahead-list .item img {
  width: 48px; height: 22px; object-fit: cover;
  border-radius: var(--radius-sm); border: 1px solid var(--color-card-border-inner);
}
.typeahead-list .item:hover, .typeahead-list .item.focused, .typeahead-list .item.active { background: var(--color-secondary-hover); }
.typeahead-list .empty { padding: 10px 12px; color: var(--steam-text-dark); font-style: italic; }

/* Ensure list floats above modal & modal body can overflow */
#goty-modal .typeahead-list { z-index: 1000; }
#goty-modal .modal-body { overflow: visible; }
